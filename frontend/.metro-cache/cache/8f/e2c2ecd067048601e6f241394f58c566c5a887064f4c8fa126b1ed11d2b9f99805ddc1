{"dependencies":[{"name":"expo-sqlite","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":38,"index":38}}],"key":"QiSBWdXsWfNLYLVy2O3EksR8vJg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.initDatabase = initDatabase;\n  exports.generateId = generateId;\n  Object.defineProperty(exports, \"db\", {\n    enumerable: true,\n    get: function () {\n      return db;\n    }\n  });\n  var _expoSqlite = require(_dependencyMap[0], \"expo-sqlite\");\n  var SQLite = _interopNamespace(_expoSqlite);\n  // Open or create the database\n  const db = SQLite.openDatabaseSync('healthmate.db');\n\n  // Initialize all tables\n  async function initDatabase() {\n    try {\n      // Profile table\n      await db.execAsync(`\n      CREATE TABLE IF NOT EXISTS profile (\n        id INTEGER PRIMARY KEY DEFAULT 1,\n        birth_date TEXT,\n        height REAL,\n        gender TEXT,\n        nutrient_goals TEXT,\n        vital_goals TEXT,\n        sport_goals TEXT,\n        tracking_settings TEXT,\n        language TEXT DEFAULT 'de',\n        updated_at TEXT DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n\n      // Nutrition entries table\n      await db.execAsync(`\n      CREATE TABLE IF NOT EXISTS nutrition_entries (\n        id TEXT PRIMARY KEY,\n        date TEXT NOT NULL,\n        time TEXT,\n        description TEXT,\n        calories REAL DEFAULT 0,\n        protein REAL DEFAULT 0,\n        carbs REAL DEFAULT 0,\n        fat REAL DEFAULT 0,\n        fiber REAL DEFAULT 0,\n        sugar REAL DEFAULT 0,\n        salt REAL DEFAULT 0,\n        water REAL DEFAULT 0,\n        created_at TEXT DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n\n      // Vitals table\n      await db.execAsync(`\n      CREATE TABLE IF NOT EXISTS vitals (\n        id TEXT PRIMARY KEY,\n        date TEXT UNIQUE NOT NULL,\n        weight REAL,\n        body_fat REAL,\n        sleep_start TEXT,\n        sleep_end TEXT,\n        sleep_duration REAL,\n        sleep_quality INTEGER,\n        morning_energy INTEGER,\n        resting_heart_rate INTEGER,\n        basal_metabolic_rate REAL,\n        neat REAL,\n        updated_at TEXT DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n\n      // Sport/Activity table\n      await db.execAsync(`\n      CREATE TABLE IF NOT EXISTS sport (\n        id TEXT PRIMARY KEY,\n        date TEXT UNIQUE NOT NULL,\n        steps INTEGER DEFAULT 0,\n        calories_burned REAL DEFAULT 0,\n        workouts TEXT,\n        custom_metrics TEXT,\n        updated_at TEXT DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n\n      // Finance categories table\n      await db.execAsync(`\n      CREATE TABLE IF NOT EXISTS finance_categories (\n        id TEXT PRIMARY KEY,\n        name TEXT NOT NULL,\n        budget REAL,\n        rhythm TEXT DEFAULT 'monthly',\n        color TEXT,\n        created_at TEXT DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n\n      // Finance entries table\n      await db.execAsync(`\n      CREATE TABLE IF NOT EXISTS finance_entries (\n        id TEXT PRIMARY KEY,\n        category_id TEXT NOT NULL,\n        date TEXT NOT NULL,\n        description TEXT,\n        amount REAL NOT NULL,\n        created_at TEXT DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY (category_id) REFERENCES finance_categories(id)\n      );\n    `);\n\n      // App blocker rules table\n      await db.execAsync(`\n      CREATE TABLE IF NOT EXISTS app_blocker_rules (\n        id TEXT PRIMARY KEY,\n        name TEXT NOT NULL,\n        apps TEXT,\n        start_time TEXT,\n        end_time TEXT,\n        days TEXT,\n        is_active INTEGER DEFAULT 1,\n        unlock_type TEXT DEFAULT 'password',\n        unlock_password TEXT,\n        sport_minutes_required INTEGER,\n        allow_temporary_unlock INTEGER DEFAULT 1,\n        temporary_unlock_minutes INTEGER DEFAULT 5,\n        created_at TEXT DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n\n      // Push notifications table\n      await db.execAsync(`\n      CREATE TABLE IF NOT EXISTS notifications (\n        id TEXT PRIMARY KEY,\n        title TEXT NOT NULL,\n        message TEXT,\n        time TEXT,\n        days TEXT,\n        is_active INTEGER DEFAULT 1,\n        created_at TEXT DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n\n      // Create indexes for better performance\n      await db.execAsync(`\n      CREATE INDEX IF NOT EXISTS idx_nutrition_date ON nutrition_entries(date);\n      CREATE INDEX IF NOT EXISTS idx_vitals_date ON vitals(date);\n      CREATE INDEX IF NOT EXISTS idx_sport_date ON sport(date);\n      CREATE INDEX IF NOT EXISTS idx_finance_entries_date ON finance_entries(date);\n      CREATE INDEX IF NOT EXISTS idx_finance_entries_category ON finance_entries(category_id);\n    `);\n\n      // Insert default profile if not exists\n      const profile = await db.getFirstAsync('SELECT id FROM profile WHERE id = 1');\n      if (!profile) {\n        await db.runAsync(`\n        INSERT INTO profile (id, nutrient_goals, vital_goals, sport_goals, tracking_settings, language)\n        VALUES (1, '{}', '{}', '{}', '{}', 'de')\n      `);\n      }\n      console.log('Database initialized successfully');\n    } catch (error) {\n      console.error('Database initialization error:', error);\n      throw error;\n    }\n  }\n\n  // Helper to generate UUID\n  function generateId() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      const r = Math.random() * 16 | 0;\n      const v = c === 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  // Export the database instance\n\n  var _default = db;\n});","lineCount":204,"map":[[22,2,169,0,"Object"],[22,8,169,0],[22,9,169,0,"defineProperty"],[22,23,169,0],[22,24,169,0,"exports"],[22,31,169,0],[23,4,169,0,"enumerable"],[23,14,169,0],[24,4,169,0,"get"],[24,7,169,0],[24,18,169,0,"get"],[24,19,169,0],[25,6,169,0],[25,13,169,0,"_default"],[25,21,169,0],[26,4,169,0],[27,2,169,0],[28,2,7,0,"exports"],[28,9,7,0],[28,10,7,0,"initDatabase"],[28,22,7,0],[28,25,7,0,"initDatabase"],[28,37,7,0],[29,2,159,0,"exports"],[29,9,159,0],[29,10,159,0,"generateId"],[29,20,159,0],[29,23,159,0,"generateId"],[29,33,159,0],[30,2,168,0,"Object"],[30,8,168,0],[30,9,168,0,"defineProperty"],[30,23,168,0],[30,24,168,0,"exports"],[30,31,168,0],[31,4,168,0,"enumerable"],[31,14,168,0],[32,4,168,0,"get"],[32,7,168,0],[32,18,168,0,"get"],[32,19,168,0],[33,6,168,0],[33,13,168,9,"db"],[33,15,168,11],[34,4,168,11],[35,2,168,11],[36,2,1,0],[36,6,1,0,"_expoSqlite"],[36,17,1,0],[36,20,1,0,"require"],[36,27,1,0],[36,28,1,0,"_dependencyMap"],[36,42,1,0],[37,2,1,0],[37,6,1,0,"SQLite"],[37,12,1,0],[37,15,1,0,"_interopNamespace"],[37,32,1,0],[37,33,1,0,"_expoSqlite"],[37,44,1,0],[38,2,3,0],[39,2,4,0],[39,8,4,6,"db"],[39,10,4,8],[39,13,4,11,"SQLite"],[39,19,4,17],[39,20,4,18,"openDatabaseSync"],[39,36,4,34],[39,37,4,35],[39,52,4,50],[39,53,4,51],[41,2,6,0],[42,2,7,7],[42,17,7,22,"initDatabase"],[42,29,7,34,"initDatabase"],[42,30,7,34],[42,32,7,52],[43,4,8,2],[43,8,8,6],[44,6,9,4],[45,6,10,4],[45,12,10,10,"db"],[45,14,10,12],[45,15,10,13,"execAsync"],[45,24,10,22],[45,25,10,23],[46,0,11,0],[47,0,12,0],[48,0,13,0],[49,0,14,0],[50,0,15,0],[51,0,16,0],[52,0,17,0],[53,0,18,0],[54,0,19,0],[55,0,20,0],[56,0,21,0],[57,0,22,0],[58,0,23,0],[58,5,23,5],[58,6,23,6],[60,6,25,4],[61,6,26,4],[61,12,26,10,"db"],[61,14,26,12],[61,15,26,13,"execAsync"],[61,24,26,22],[61,25,26,23],[62,0,27,0],[63,0,28,0],[64,0,29,0],[65,0,30,0],[66,0,31,0],[67,0,32,0],[68,0,33,0],[69,0,34,0],[70,0,35,0],[71,0,36,0],[72,0,37,0],[73,0,38,0],[74,0,39,0],[75,0,40,0],[76,0,41,0],[77,0,42,0],[77,5,42,5],[77,6,42,6],[79,6,44,4],[80,6,45,4],[80,12,45,10,"db"],[80,14,45,12],[80,15,45,13,"execAsync"],[80,24,45,22],[80,25,45,23],[81,0,46,0],[82,0,47,0],[83,0,48,0],[84,0,49,0],[85,0,50,0],[86,0,51,0],[87,0,52,0],[88,0,53,0],[89,0,54,0],[90,0,55,0],[91,0,56,0],[92,0,57,0],[93,0,58,0],[94,0,59,0],[95,0,60,0],[96,0,61,0],[96,5,61,5],[96,6,61,6],[98,6,63,4],[99,6,64,4],[99,12,64,10,"db"],[99,14,64,12],[99,15,64,13,"execAsync"],[99,24,64,22],[99,25,64,23],[100,0,65,0],[101,0,66,0],[102,0,67,0],[103,0,68,0],[104,0,69,0],[105,0,70,0],[106,0,71,0],[107,0,72,0],[108,0,73,0],[109,0,74,0],[109,5,74,5],[109,6,74,6],[111,6,76,4],[112,6,77,4],[112,12,77,10,"db"],[112,14,77,12],[112,15,77,13,"execAsync"],[112,24,77,22],[112,25,77,23],[113,0,78,0],[114,0,79,0],[115,0,80,0],[116,0,81,0],[117,0,82,0],[118,0,83,0],[119,0,84,0],[120,0,85,0],[121,0,86,0],[121,5,86,5],[121,6,86,6],[123,6,88,4],[124,6,89,4],[124,12,89,10,"db"],[124,14,89,12],[124,15,89,13,"execAsync"],[124,24,89,22],[124,25,89,23],[125,0,90,0],[126,0,91,0],[127,0,92,0],[128,0,93,0],[129,0,94,0],[130,0,95,0],[131,0,96,0],[132,0,97,0],[133,0,98,0],[134,0,99,0],[134,5,99,5],[134,6,99,6],[136,6,101,4],[137,6,102,4],[137,12,102,10,"db"],[137,14,102,12],[137,15,102,13,"execAsync"],[137,24,102,22],[137,25,102,23],[138,0,103,0],[139,0,104,0],[140,0,105,0],[141,0,106,0],[142,0,107,0],[143,0,108,0],[144,0,109,0],[145,0,110,0],[146,0,111,0],[147,0,112,0],[148,0,113,0],[149,0,114,0],[150,0,115,0],[151,0,116,0],[152,0,117,0],[153,0,118,0],[153,5,118,5],[153,6,118,6],[155,6,120,4],[156,6,121,4],[156,12,121,10,"db"],[156,14,121,12],[156,15,121,13,"execAsync"],[156,24,121,22],[156,25,121,23],[157,0,122,0],[158,0,123,0],[159,0,124,0],[160,0,125,0],[161,0,126,0],[162,0,127,0],[163,0,128,0],[164,0,129,0],[165,0,130,0],[166,0,131,0],[166,5,131,5],[166,6,131,6],[168,6,133,4],[169,6,134,4],[169,12,134,10,"db"],[169,14,134,12],[169,15,134,13,"execAsync"],[169,24,134,22],[169,25,134,23],[170,0,135,0],[171,0,136,0],[172,0,137,0],[173,0,138,0],[174,0,139,0],[175,0,140,0],[175,5,140,5],[175,6,140,6],[177,6,142,4],[178,6,143,4],[178,12,143,10,"profile"],[178,19,143,17],[178,22,143,20],[178,28,143,26,"db"],[178,30,143,28],[178,31,143,29,"getFirstAsync"],[178,44,143,42],[178,45,143,43],[178,82,143,80],[178,83,143,81],[179,6,144,4],[179,10,144,8],[179,11,144,9,"profile"],[179,18,144,16],[179,20,144,18],[180,8,145,6],[180,14,145,12,"db"],[180,16,145,14],[180,17,145,15,"runAsync"],[180,25,145,23],[180,26,145,24],[181,0,146,0],[182,0,147,0],[183,0,148,0],[183,7,148,7],[183,8,148,8],[184,6,149,4],[185,6,151,4,"console"],[185,13,151,11],[185,14,151,12,"log"],[185,17,151,15],[185,18,151,16],[185,53,151,51],[185,54,151,52],[186,4,152,2],[186,5,152,3],[186,6,152,4],[186,13,152,11,"error"],[186,18,152,16],[186,20,152,18],[187,6,153,4,"console"],[187,13,153,11],[187,14,153,12,"error"],[187,19,153,17],[187,20,153,18],[187,52,153,50],[187,54,153,52,"error"],[187,59,153,57],[187,60,153,58],[188,6,154,4],[188,12,154,10,"error"],[188,17,154,15],[189,4,155,2],[190,2,156,0],[192,2,158,0],[193,2,159,7],[193,11,159,16,"generateId"],[193,21,159,26,"generateId"],[193,22,159,26],[193,24,159,37],[194,4,160,2],[194,11,160,9],[194,49,160,47],[194,50,160,48,"replace"],[194,57,160,55],[194,58,160,56],[194,65,160,63],[194,67,160,65],[194,77,160,74,"c"],[194,78,160,75],[194,80,160,77],[195,6,161,4],[195,12,161,10,"r"],[195,13,161,11],[195,16,161,14,"Math"],[195,20,161,18],[195,21,161,19,"random"],[195,27,161,25],[195,28,161,26],[195,29,161,27],[195,32,161,30],[195,34,161,32],[195,37,161,35],[195,38,161,36],[196,6,162,4],[196,12,162,10,"v"],[196,13,162,11],[196,16,162,14,"c"],[196,17,162,15],[196,22,162,20],[196,25,162,23],[196,28,162,26,"r"],[196,29,162,27],[196,32,162,31,"r"],[196,33,162,32],[196,36,162,35],[196,39,162,38],[196,42,162,41],[196,45,162,45],[197,6,163,4],[197,13,163,11,"v"],[197,14,163,12],[197,15,163,13,"toString"],[197,23,163,21],[197,24,163,22],[197,26,163,24],[197,27,163,25],[198,4,164,2],[198,5,164,3],[198,6,164,4],[199,2,165,0],[201,2,167,0],[203,2,169,0],[203,6,169,0,"_default"],[203,14,169,0],[203,17,169,15,"db"],[203,19,169,17],[204,0,169,18],[204,3]],"functionMap":{"names":["<global>","initDatabase","generateId","xxxxxxxxXxxx4xxxYxxxXxxxxxxxxxxx.replace$argument_1"],"mappings":"AAA;OCM;CDqJ;OEG;iECC;GDI;CFC"},"hasCjsExports":false},"type":"js/module"}]}