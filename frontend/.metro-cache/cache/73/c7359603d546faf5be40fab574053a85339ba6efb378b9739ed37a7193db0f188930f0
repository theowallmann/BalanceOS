{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":66,"index":66}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../createMMKV/getDefaultMMKVInstance","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":67},"end":{"line":2,"column":78,"index":145}}],"key":"DiSZT0xdzLAiN93w0d0GfoSFlyA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.createMMKVHook = createMMKVHook;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _createMMKVGetDefaultMMKVInstance = require(_dependencyMap[1], \"../createMMKV/getDefaultMMKVInstance\");\n  function createMMKVHook(getter) {\n    return (key, instance) => {\n      const mmkv = instance ?? (0, _createMMKVGetDefaultMMKVInstance.getDefaultMMKVInstance)();\n      const [bump, setBump] = (0, _react.useState)(0);\n      const value = (0, _react.useMemo)(() => {\n        // bump is here as an additional outside dependency, so this useMemo\n        // re-computes the value each time bump changes, effectively acting as a hint\n        // that the outside value (storage) has changed. setting bump refreshes this value.\n        bump;\n        return getter(mmkv, key);\n      }, [mmkv, key, bump]);\n      // update value by user set\n      const set = (0, _react.useCallback)(v => {\n        const newValue = typeof v === 'function' ? v(getter(mmkv, key)) : v;\n        switch (typeof newValue) {\n          case 'number':\n          case 'string':\n          case 'boolean':\n            mmkv.set(key, newValue);\n            break;\n          case 'undefined':\n            mmkv.remove(key);\n            break;\n          case 'object':\n            if (newValue instanceof ArrayBuffer) {\n              mmkv.set(key, newValue);\n              break;\n            } else {\n              throw new Error(`MMKV: Type object (${newValue}) is not supported!`);\n            }\n          default:\n            throw new Error(`MMKV: Type ${typeof newValue} is not supported!`);\n        }\n      }, [key, mmkv]);\n      // update value if it changes somewhere else (second hook, same key)\n      (0, _react.useEffect)(() => {\n        const listener = mmkv.addOnValueChangedListener(changedKey => {\n          if (changedKey === key) {\n            setBump(b => b + 1);\n          }\n        });\n        return () => listener.remove();\n      }, [key, mmkv]);\n      return [value, set];\n    };\n  }\n});","lineCount":56,"map":[[7,2,3,0,"exports"],[7,9,3,0],[7,10,3,0,"createMMKVHook"],[7,24,3,0],[7,27,3,0,"createMMKVHook"],[7,41,3,0],[8,2,1,0],[8,6,1,0,"_react"],[8,12,1,0],[8,15,1,0,"require"],[8,22,1,0],[8,23,1,0,"_dependencyMap"],[8,37,1,0],[9,2,2,0],[9,6,2,0,"_createMMKVGetDefaultMMKVInstance"],[9,39,2,0],[9,42,2,0,"require"],[9,49,2,0],[9,50,2,0,"_dependencyMap"],[9,64,2,0],[10,2,3,7],[10,11,3,16,"createMMKVHook"],[10,25,3,30,"createMMKVHook"],[10,26,3,31,"getter"],[10,32,3,37],[10,34,3,39],[11,4,4,4],[11,11,4,11],[11,12,4,12,"key"],[11,15,4,15],[11,17,4,17,"instance"],[11,25,4,25],[11,30,4,30],[12,6,5,8],[12,12,5,14,"mmkv"],[12,16,5,18],[12,19,5,21,"instance"],[12,27,5,29],[12,31,5,33],[12,35,5,33,"getDefaultMMKVInstance"],[12,68,5,55],[12,69,5,55,"getDefaultMMKVInstance"],[12,91,5,55],[12,93,5,56],[12,94,5,57],[13,6,6,8],[13,12,6,14],[13,13,6,15,"bump"],[13,17,6,19],[13,19,6,21,"setBump"],[13,26,6,28],[13,27,6,29],[13,30,6,32],[13,34,6,32,"useState"],[13,40,6,40],[13,41,6,40,"useState"],[13,49,6,40],[13,51,6,41],[13,52,6,42],[13,53,6,43],[14,6,7,8],[14,12,7,14,"value"],[14,17,7,19],[14,20,7,22],[14,24,7,22,"useMemo"],[14,30,7,29],[14,31,7,29,"useMemo"],[14,38,7,29],[14,40,7,30],[14,46,7,36],[15,8,8,12],[16,8,9,12],[17,8,10,12],[18,8,11,12,"bump"],[18,12,11,16],[19,8,12,12],[19,15,12,19,"getter"],[19,21,12,25],[19,22,12,26,"mmkv"],[19,26,12,30],[19,28,12,32,"key"],[19,31,12,35],[19,32,12,36],[20,6,13,8],[20,7,13,9],[20,9,13,11],[20,10,13,12,"mmkv"],[20,14,13,16],[20,16,13,18,"key"],[20,19,13,21],[20,21,13,23,"bump"],[20,25,13,27],[20,26,13,28],[20,27,13,29],[21,6,14,8],[22,6,15,8],[22,12,15,14,"set"],[22,15,15,17],[22,18,15,20],[22,22,15,20,"useCallback"],[22,28,15,31],[22,29,15,31,"useCallback"],[22,40,15,31],[22,42,15,33,"v"],[22,43,15,34],[22,47,15,39],[23,8,16,12],[23,14,16,18,"newValue"],[23,22,16,26],[23,25,16,29],[23,32,16,36,"v"],[23,33,16,37],[23,38,16,42],[23,48,16,52],[23,51,16,55,"v"],[23,52,16,56],[23,53,16,57,"getter"],[23,59,16,63],[23,60,16,64,"mmkv"],[23,64,16,68],[23,66,16,70,"key"],[23,69,16,73],[23,70,16,74],[23,71,16,75],[23,74,16,78,"v"],[23,75,16,79],[24,8,17,12],[24,16,17,20],[24,23,17,27,"newValue"],[24,31,17,35],[25,10,18,16],[25,15,18,21],[25,23,18,29],[26,10,19,16],[26,15,19,21],[26,23,19,29],[27,10,20,16],[27,15,20,21],[27,24,20,30],[28,12,21,20,"mmkv"],[28,16,21,24],[28,17,21,25,"set"],[28,20,21,28],[28,21,21,29,"key"],[28,24,21,32],[28,26,21,34,"newValue"],[28,34,21,42],[28,35,21,43],[29,12,22,20],[30,10,23,16],[30,15,23,21],[30,26,23,32],[31,12,24,20,"mmkv"],[31,16,24,24],[31,17,24,25,"remove"],[31,23,24,31],[31,24,24,32,"key"],[31,27,24,35],[31,28,24,36],[32,12,25,20],[33,10,26,16],[33,15,26,21],[33,23,26,29],[34,12,27,20],[34,16,27,24,"newValue"],[34,24,27,32],[34,36,27,44,"ArrayBuffer"],[34,47,27,55],[34,49,27,57],[35,14,28,24,"mmkv"],[35,18,28,28],[35,19,28,29,"set"],[35,22,28,32],[35,23,28,33,"key"],[35,26,28,36],[35,28,28,38,"newValue"],[35,36,28,46],[35,37,28,47],[36,14,29,24],[37,12,30,20],[37,13,30,21],[37,19,31,25],[38,14,32,24],[38,20,32,30],[38,24,32,34,"Error"],[38,29,32,39],[38,30,32,40],[38,52,32,62,"newValue"],[38,60,32,70],[38,81,32,91],[38,82,32,92],[39,12,33,20],[40,10,34,16],[41,12,35,20],[41,18,35,26],[41,22,35,30,"Error"],[41,27,35,35],[41,28,35,36],[41,42,35,50],[41,49,35,57,"newValue"],[41,57,35,65],[41,77,35,85],[41,78,35,86],[42,8,36,12],[43,6,37,8],[43,7,37,9],[43,9,37,11],[43,10,37,12,"key"],[43,13,37,15],[43,15,37,17,"mmkv"],[43,19,37,21],[43,20,37,22],[43,21,37,23],[44,6,38,8],[45,6,39,8],[45,10,39,8,"useEffect"],[45,16,39,17],[45,17,39,17,"useEffect"],[45,26,39,17],[45,28,39,18],[45,34,39,24],[46,8,40,12],[46,14,40,18,"listener"],[46,22,40,26],[46,25,40,29,"mmkv"],[46,29,40,33],[46,30,40,34,"addOnValueChangedListener"],[46,55,40,59],[46,56,40,61,"changedKey"],[46,66,40,71],[46,70,40,76],[47,10,41,16],[47,14,41,20,"changedKey"],[47,24,41,30],[47,29,41,35,"key"],[47,32,41,38],[47,34,41,40],[48,12,42,20,"setBump"],[48,19,42,27],[48,20,42,29,"b"],[48,21,42,30],[48,25,42,35,"b"],[48,26,42,36],[48,29,42,39],[48,30,42,40],[48,31,42,41],[49,10,43,16],[50,8,44,12],[50,9,44,13],[50,10,44,14],[51,8,45,12],[51,15,45,19],[51,21,45,25,"listener"],[51,29,45,33],[51,30,45,34,"remove"],[51,36,45,40],[51,37,45,41],[51,38,45,42],[52,6,46,8],[52,7,46,9],[52,9,46,11],[52,10,46,12,"key"],[52,13,46,15],[52,15,46,17,"mmkv"],[52,19,46,21],[52,20,46,22],[52,21,46,23],[53,6,47,8],[53,13,47,15],[53,14,47,16,"value"],[53,19,47,21],[53,21,47,23,"set"],[53,24,47,26],[53,25,47,27],[54,4,48,4],[54,5,48,5],[55,2,49,0],[56,0,49,1],[56,3]],"functionMap":{"names":["<global>","createMMKVHook","<anonymous>","useMemo$argument_0","set","useEffect$argument_0","mmkv.addOnValueChangedListener$argument_0","setBump$argument_0"],"mappings":"AAA;OCE;WCC;8BCG;SDM;gCEE;SFsB;kBGE;4DCC;4BCE,YD;aDE;mBHC,uBG;SHC;KDE;CDC"},"hasCjsExports":false},"type":"js/module"}]}